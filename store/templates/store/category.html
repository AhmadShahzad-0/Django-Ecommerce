{% extends 'store/base.html' %}

{% block content %}
<!-- Header -->
<header class="bg-dark py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">{{ category }}</h1>
            <p class="lead fw-normal text-white-50 mb-0">Browse our collection</p>
        </div>
    </div>
</header>

<!-- Product Cards Section -->
<section class="py-5">
    <div class="container px-4 px-lg-5 mt-4">
        <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 justify-content-center">

            {% for product in products %}
            <div class="col mb-4">
                <a href="{% url 'product' product.id %}" class="text-decoration-none text-dark">
                    <div class="card h-100 border-0 bg-white position-relative"
                        style="border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.3s ease;"
                        onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.15)'"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.1)'">

                        {% if product.is_on_sale %}
                        <div class="position-absolute" style="top: 8px; left: 8px; z-index: 2;">
                            <span class="badge bg-danger text-white px-2 py-1"
                                style="font-size: 0.75rem; border-radius: 4px;">
                                Sale
                            </span>
                        </div>
                        {% endif %}

                        <!-- Product image -->
                        <div class="position-relative" style="width: 100%; padding-top: 100%; background-color: #f8f9fa;">
                            <img class="position-absolute top-0 start-0 w-100 h-100" 
                                src="{{ product.image.url }}" alt="{{ product.name }}"
                                style="object-fit: cover; border-radius: 8px 8px 0 0;" />
                        </div>

                        <!-- Product details -->
                        <div class="card-body p-3 text-center">
                            <h5 class="card-title mb-2" style="font-size: 1.1rem; font-weight: 600; color: #333;">
                                {{ product.name }}
                            </h5>

                            {% if product.is_on_sale %}
                            <div class="mb-2">
                                <span class="text-muted text-decoration-line-through me-2" style="font-size: 0.9rem;">
                                    Rs.{{ product.price }}
                                </span>
                                <span style="font-size: 1.1rem; color: #333;">
                                    Rs.{{ product.sale_price }}
                                </span>
                            </div>
                            {% else %}
                            <div class="mb-2" style="font-size: 1.1rem; color: #333;">Rs.{{ product.price }}</div>
                            {% endif %}

                            <div class="text-muted" style="font-size: 0.85rem;">
                                {{ product.category }}
                            </div>
                        </div>

                        <!-- Add to Cart Button -->
                        <div class="card-footer bg-transparent border-0 text-center p-3">
                            <button class="btn btn-dark btn-sm px-4 py-2 rounded"
                                style="font-size: 0.85rem; background-color: #333; border: none;"
                                onmouseover="this.style.backgroundColor='#555'"
                                onmouseout="this.style.backgroundColor='#333'">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}

        </div>
    </div>
</section>
{% endblock %}
